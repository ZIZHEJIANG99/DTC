{% comment %}
  Renders a progress bar showing how close the cart is to free shipping.
  Usage:
    {% render 'shipping-progress-bar' %}
  Optional param: threshold in cents (default = 2500 => $25)
{% endcomment %}

{% assign threshold = threshold | default: 2500 %}
{% assign cart_total = cart.total_price | default: 0 %}
{% assign remaining = threshold | minus: cart_total %}
{% assign percent = cart_total | times: 100 | divided_by: threshold %}

<div class="shipping-progress">
  {% if cart_total < threshold %}
    <div class="shipping-progress__track">
      <div class="shipping-progress__fill" style="width:{{ percent }}%;"></div>
    </div>
    <p class="shipping-progress__text">You're {{ remaining | money }} away from free shipping</p>
  {% else %}
    <div class="shipping-progress__track">
      <div class="shipping-progress__fill" style="width:100%;"></div>
    </div>
    <p class="shipping-progress__text">You've qualified for free shipping!</p>
  {% endif %}
</div>

<style>
/* 加大进度条高度和文字尺寸，使其更醒目 */
.shipping-progress{margin:0 0 1rem;}
.shipping-progress__track{
  background:#eee;
  height:24px;            /* 高度由8px增大到24px */
  border-radius:12px;
  overflow:hidden;
}
.shipping-progress__fill{
  background:#000;        /* 进度条填充色，可按主题调色 */
  height:100%;
  border-radius:12px;
}
.shipping-progress__text{
  text-align:center;
  font-size:1.25rem;      /* 字体由0.875rem增大到1.25rem */
  margin-top:.75rem;
}
</style>
