{% comment %}
  Renders a progress bar showing how close the cart is to free shipping.
  Usage:
    {% render 'shipping-progress-bar' %}
  Optional param: threshold in cents (default = 2500 => $25)
{% endcomment %}

{% assign threshold = threshold | default: 2500 %}
{% assign cart_total = cart.total_price | default: 0 %}
{% if cart_total >= threshold %}
  {% assign progress_percent = 100 %}
{% else %}
  {% assign progress_percent = cart_total | times: 100 | divided_by: threshold | floor %}
{% endif %}

<div class="free-shipping-bar">
  <div class="free-shipping-bar__fill" style="width: {{ progress_percent }}%;"></div>
</div>
